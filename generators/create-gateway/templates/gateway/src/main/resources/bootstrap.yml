spring:
  application:
    #服务名称
    name: ${MICRO_SERVICE_NAME}
  cloud:
    <%_ if (CONFIG_SERVER_TYPE == 'CONSUL' || DISCOVERY_SERVER_TYPE == 'CONSUL') { -%>
    #Consul 配置
    consul:
      #Consul 主机名
      host: <%= CONSUL_HOST || "#请输入 Consul 主机名" %>
      #Consul 端口号
      port: <%= CONSUL_PORT || "#请输入 Consul 端口号"%>
      <%_ if (DISCOVERY_SERVER_TYPE == 'CONSUL') { -%>
      #Consul 注册发现配置
      discovery:
        #Consul 凭据
        acl-token: <%= CONSUL_TOKEN %>
      <%_ } -%>
      <%_ if (CONFIG_SERVER_ENABLED && CONFIG_SERVER_TYPE == 'CONSUL') { -%>
      config:
        <%_ if (CONSUL_TOKEN) { -%>
        #Consul 凭据
        acl-token: <%= CONSUL_TOKEN %>
        <%_ } -%>
        #是否动态拉取配置
        watch:
          enabled: true
      <%_ } -%>
    <%_ } -%>
    <%_ if (CONFIG_SERVER_ENABLED && CONFIG_SERVER_TYPE == 'K8S') { -%>
    kubernetes:
      reload:
        enabled: true
      secrets:
        sources:
          - name: ${MICRO_SERVICE_NAME}
      config:
        sources:
          - name: ${MICRO_SERVICE_NAME}
    <%_ } -%>
---
spring:
  profiles: local
  cloud:
    kubernetes:
      client:
        masterUrl: https://127.0.0.1:8443
        trustCerts: true
      config:
        namespace: <%= K8S_NAMESPACE || "#请输入 命名空间名称" %>
      secrets:
        namespace: <%= K8S_NAMESPACE || "#请输入 命名空间名称" %>
        enable-api: true

